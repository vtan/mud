- id: 0
  name: First room
  description: This is the first room. There is nothing here.
  exits:
    north: 1
    south: 2
    east: 3

- id: 1
  name: Northern room
  description: It is very north here. There is an orb in the middle of the room.
  exits:
    south: 0
  objects:
  - name: orb
    description:
    - condition: { equals: [orb, 0] }
      fragment: The wonrdous Tri-State Orb of Testing is glowing red, inviting you to ponder it.
    - condition: { equals: [orb, 1] }
      fragment: The wonrdous Tri-State Orb of Testing is glowing green, inviting you to ponder it.
    - condition: { equals: [orb, 2] }
      fragment: The wonrdous Tri-State Orb of Testing is glowing blue, inviting you to ponder it.
    commands:
    - command: ponder
      condition: { equals: [orb, 0] }
      statements:
      - setRoomVar: [orb, 1]
      - tellSelf: "You ponder the orb thoroughly."
      - tellOthers: "ponders the orb."
      - tellRoom: "The orb flashes and turns emerald green."
    - command: ponder
      condition: { equals: [orb, 1] }
      statements:
      - setRoomVar: [orb, 2]
      - tellSelf: "You ponder the orb thoroughly."
      - tellOthers: "ponders the orb."
      - tellRoom: "The orb flashes and turns azure blue."
    - command: ponder
      condition: { equals: [orb, 2] }
      statements:
      - setRoomVar: [orb, 0]
      - tellSelf: "You ponder the orb thoroughly."
      - tellOthers: "ponders the orb."
      - tellRoom: "The orb flashes and turns crimson red."

- id: 2
  name: The Red Room
  description: Just testing.
  exits:
    north: 0
    northeast: 3

- id: 3
  name: Temple of the Forgotten Frog Deity
  description: >-
    In the center of the room stands a large statue of a vaguely toadlike creature.
    You can try and look at it.
  exits:
    west: 0
    southwest: 2
    south: 4
  objects:
    - name: statue
      description: >-
        A looming statue made of dark grey stone.
        The creature resembles a frog, except for its four greedy eyes and clawed limbs.

- id: 4
  name: Library
  description:
  - fragment: >-
      A large, crude stone table dominates this room.
      Around the table there are decayed remains of wooden chairs, succumbed to rot long ago.
      The walls of the library are lined with stone bookcases.
  - condition: { equals: [book, 1] }
    fragment: >-
      One of them have slided away, giving way to a dark passageway to the east.
  exits:
    north: 3
    east:
      condition: { equals: [book, 1] }
      to: 5
  objects:
    - name: table
      description: >-
        The stone table is empty, except for sporadic fine dust.
        Perhaps the remains of parchments from aeons ago.
    - name: chairs
      aliases: [chair]
      description: A few rotten pieces of wood.
    - name: bookcase
      aliases: [bookcases, case, cases, books]
      description:
      - condition: { equals: [book, 0] }
        fragment: >-
          The bookcases are filled with heavily decomposed books.
          One of the books, however, is in an almost flawless condition.
      - condition: { equals: [book, 1] }
        fragment: >-
          The bookcases are filled with heavily decomposed books.
          One of the bookcases have slided away, giving way to a dark passageway to the east.
    - name: flawless book
      aliases: [book]
      description: >-
        The cover of this book is written in an ancient script unknown to you.
        A disguised mechanism is attached to it from behind the bookcase.
      commands:
      - command: push
        condition: { equals: [book, 0] }
        statements:
        - setRoomVar: [book, 1]
        - resetRoomVarAfterTicks: [book, 30, "The bookshelf slides back."]
        - tellSelf: "You push the book."
        - tellOthers: "pushes a book on a bookshelf."
        - tellRoom: "The bookcase slides away, giving way to a dark passageway to the east."
    - name: mechanism
      description: It looks like this mechanism can be triggered by pushing the book.

- id: 5
  name: Inner sanctum
  description: There is so much gold here. So much.
  objects:
  - name: gold
    description: Yes. So much gold.
  exits:
    west: 4
